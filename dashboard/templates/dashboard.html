<!-- templates/dashboard.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Trading Dashboard</title>
    <!-- במידת הצורך, לינקים ל-CSS/Bootstrap -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container-fluid">

    <!-- כותרת עליונה עם עדכון אחרון ובחירת אזור זמן -->
    <div class="d-flex justify-content-between align-items-center my-2">
        <div>
            <strong>Last update</strong> (<span id="tzLabel">IL time</span>): 
            <span id="lastRefresh" class="timestamp" data-utc="{{ last_refresh }}">{{ last_refresh }}</span>
        </div>
        <div>
            <select id="timezoneSelect" class="form-select form-select-sm d-inline-block" style="width:auto;">
                <option value="IL" selected>IL time</option>
                <option value="UTC">UTC</option>
            </select>
        </div>
    </div>

    <!-- תוכן ראשי: טבלת עסקאות וגרף Equity -->
    <div class="row">
        <!-- טבלת העסקאות -->
        <div class="col-md-8">
            <div class="table-responsive">
                <table class="table table-striped table-sm">
                    <thead class="table-light">
                        <tr>
                            <th>Time (<span id="tzLabelTable">IL</span>)</th>
                            <th>Symbol</th>
                            <th>Quantity</th>
                            <th>Price</th>
                            <th>P/L</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for trade in trades %}
                        <tr>
                            <td class="timestamp" data-utc="{{ trade.time }}">{{ trade.time }}</td>
                            <td>{{ trade.symbol }}</td>
                            <td>{{ trade.quantity }}</td>
                            <td>{{ trade.price }}</td>
                            <td>{{ trade.profit }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        <!-- גרף ה-Equity -->
        <div class="col-md-4">
            <canvas id="equityChart" width="400" height="300"></canvas>
            <!-- הערה: בהנחה שבפועל סקריפט JS נפרד יטפל בציור הגרף על הקנבס באמצעות הנתונים הרלוונטיים -->
        </div>
    </div>

    <!-- חיבור לסקריפטים: תחילה Bootstrap JS (אם צריך), ואחריו סקריפט אזורי הזמן -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
    <!-- קישור לקובץ ה-JS שלנו האחראי על שינוי אזור הזמן -->
    <script src="{{ url_for('static', filename='js/timezone.js') }}"></script>
</body>
</html>
